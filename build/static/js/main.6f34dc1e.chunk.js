(this.webpackJsonphooks=this.webpackJsonphooks||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(5),s=a.n(r),l=(a(16),a(6)),i=a(7),d=a(9),c=a(8),u=a(1),h=a(10),k=a(2),m=(a(17),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(c.a)(t).call(this,e))).state={serverUrl:"",site:"",username:"",password:"",signInUser:"",token:"",siteId:"",url:"",hook:"webhook-source-event-datasource-refresh-started",hookList:[],name:""},a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.handleServerUrl=a.handleServerUrl.bind(Object(u.a)(a)),a.handleSite=a.handleSite.bind(Object(u.a)(a)),a.handlePassword=a.handlePassword.bind(Object(u.a)(a)),a.handleUsername=a.handleUsername.bind(Object(u.a)(a)),a.handleURL=a.handleURL.bind(Object(u.a)(a)),a.handleHook=a.handleHook.bind(Object(u.a)(a)),a.handleCreateWebhook=a.handleCreateWebhook.bind(Object(u.a)(a)),a.remove=a.remove.bind(Object(u.a)(a)),a.handleName=a.handleName.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"handleAnswerSignin",value:function(){var e=this.state.signInUser,t=(new(a(4))).parseFromString(e);void 0!==t.getElementsByTagName("credentials")[0]&&this.setState({token:t.getElementsByTagName("credentials")[0].attributes.token,siteId:t.getElementsByTagName("site")[0].attributes.id})}},{key:"signInUser",value:function(){var e=this,t=new XMLHttpRequest;t.addEventListener("load",(function(){console.log(t.responseText),e.setState({signInUser:t.responseText}),""!==e.state.signInUser&&(e.handleAnswerSignin(),e.getHooks())})),t.open("POST","".concat(this.state.serverUrl,"/api/3.6/auth/signin")),t.setRequestHeader("Access-Control-Allow-Origin","https://appsfortableau.com"),t.send('<tsRequest>\n        <credentials\n          name="'.concat(this.state.username,'"\n          password="').concat(this.state.password,'" \n        >\n        <site contentUrl="').concat(this.state.site,'" />\n        </credentials>\n        </tsRequest>'))}},{key:"getHooks",value:function(){var e=this,t=new XMLHttpRequest;t.addEventListener("load",(function(){var o=t.responseText,n=(new(a(4))).parseFromString(o);e.setState({hookList:n.getElementsByTagName("webhook")})})),t.open("GET","".concat(this.state.serverUrl,"/api/3.6/sites/").concat(this.state.siteId,"/webhooks")),t.setRequestHeader("X-Tableau-Auth",this.state.token),t.send()}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.signInUser(this.state.username,this.state.password)}},{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleServerUrl",value:function(e){this.setState({serverUrl:e.target.value})}},{key:"handleSite",value:function(e){this.setState({site:e.target.value})}},{key:"handleURL",value:function(e){this.setState({url:e.target.value})}},{key:"handleName",value:function(e){this.setState({name:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleHook",value:function(e){this.setState({hook:e.target.value})}},{key:"handleCreateWebhook",value:function(e){var t=this;e.preventDefault();var a=new XMLHttpRequest;a.addEventListener("load",(function(){t.getHooks()})),a.open("POST","".concat(this.state.serverUrl,"/api/3.6/sites/").concat(this.state.siteId,"/webhooks")),a.setRequestHeader("X-Tableau-Auth",this.state.token),console.log(this.state.url),a.send("<tsRequest><webhook name='"+this.state.name+"'><webhook-source><"+this.state.hook+"/></webhook-source><webhook-destination><webhook-destination-http method='POST' url='"+this.state.url+"'/></webhook-destination></webhook></tsRequest>")}},{key:"makeItNice",value:function(e){return"webhook-source-event-datasource-refresh-started"===e?"Datasource Refresh Started":"webhook-source-event-datasource-refresh-succeeded"===e?"Datasource Refresh Succeeded":"webhook-source-event-datasource-refresh-failed"===e?"Datasource Refresh Failed":"webhook-source-event-datasource-updated"===e?"Datasource Updated":"webhook-source-event-datasource-created"===e?"Datasource Created":"webhook-source-event-datasource-deleted"===e?"Datasource Deleted":"webhook-source-event-workbook-updated"===e?"Workbook Updated":"webhook-source-event-workbook-created"===e?"Workbook Created":"webhook-source-event-workbook-deleted"===e?"Workbook Deleted":"webhook-source-event-workbook-refresh-started"===e?"Workbook Refresh Started":"webhook-source-event-workbook-created"===e?"Workbook Created":"webhook-source-event-workbook-refresh-succeededed"===e?"Workbook Refresh Succeeded":"webhook-source-event-workbook-refresh-failed"===e?"Workbook Refresh Failed":""}},{key:"remove",value:function(e){var t=this,a=new XMLHttpRequest;a.addEventListener("load",(function(){t.getHooks()})),a.open("DELETE","".concat(this.state.serverUrl,"/api/3.6/sites/").concat(this.state.siteId,"/webhooks/").concat(e)),a.setRequestHeader("X-Tableau-Auth",this.state.token),a.send()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{style:{textAlign:"center"}},""===this.state.signInUser?n.a.createElement("div",{style:{padding:50}},n.a.createElement("h1",{style:{fontSize:90,marginBottom:0}},"EasyHooks Login"),n.a.createElement("h1",{style:{fontSize:15,marginBottom:25}},"No information is stored on our servers. Refreshing the page will remove all session data."),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(k.TextField,{label:"Tableau Server URL",placeholder:"https://10ax.online.tableau.com",style:{width:300},id:"text",type:"text",name:"serverUrl",onChange:this.handleServerUrl}),n.a.createElement("br",null),n.a.createElement(k.TextField,{label:"Tableau Site (leave empty for default)",style:{width:300},id:"text",type:"text",name:"site",onChange:this.handleSite}),n.a.createElement("br",null),n.a.createElement(k.TextField,{label:"Username",style:{width:300},id:"Password",type:"text",name:"username",onChange:this.handleUsername}),n.a.createElement("br",null),n.a.createElement(k.TextField,{label:"Password",id:"Password",style:{width:300},type:"password",name:"username",onChange:this.handlePassword}),n.a.createElement(k.Button,{kind:"primary",style:{display:"block",margin:"auto",marginTop:12},type:"submit",onClick:function(){return e.handleSubmit},value:"Start using EasyHooks!"},"Log in!"))):n.a.createElement("div",null,n.a.createElement("h1",{style:{fontSize:50}},"Add EasyHook"),n.a.createElement("form",{onSubmit:this.handleCreateWebhook},n.a.createElement("span",{style:{display:"block"}},n.a.createElement(k.TextField,{label:"Webhook Name",type:"text",style:{width:300},name:"name",onChange:this.handleName})),n.a.createElement("span",{style:{display:"block"}},n.a.createElement(k.TextField,{label:"Handle URL",style:{width:300},type:"text",name:"name",placeholder:"A Handle URL (For example Zapier or IFTTT",onChange:this.handleURL})),n.a.createElement("span",{style:{display:"block",marginTop:12}},n.a.createElement("span",{style:{display:"block",fontSize:10}},"Select hook type"),n.a.createElement(k.DropdownSelect,{onChange:this.handleHook},n.a.createElement("option",{value:"webhook-source-event-datasource-refresh-started"},"Datasource Refresh Started"),n.a.createElement("option",{value:"webhook-source-event-datasource-refresh-succeeded"},"Datasource Refresh Succeeded"),n.a.createElement("option",{value:"webhook-source-event-datasource-refresh-failed"},"Datasource Refresh Failed"),n.a.createElement("option",{value:"webhook-source-event-datasource-updated"},"Datasource Updated"),n.a.createElement("option",{value:"webhook-source-event-datasource-created"},"Datasource Created"),n.a.createElement("option",{value:"webhook-source-event-datasource-deleted"},"Datasource Deleted"),n.a.createElement("option",{value:"webhook-source-event-workbook-updated"},"Workbook Updated"),n.a.createElement("option",{value:"webhook-source-event-workbook-created"},"Workbook Created"),n.a.createElement("option",{value:"webhook-source-event-workbook-deleted"},"Workbook Deleted"),n.a.createElement("option",{value:"webhook-source-event-workbook-refresh-started"},"Workbook Refresh Started"),n.a.createElement("option",{value:"webhook-source-event-workbook-created"},"Workbook Created"),n.a.createElement("option",{value:"webhook-source-event-workbook-refresh-succeededed"},"Workbook Refresh Succeeded"),n.a.createElement("option",{value:"webhook-source-event-workbook-refresh-failed"},"Workbook Refresh Failed"))),n.a.createElement(k.Button,{type:"submit",style:{display:"block",margin:"auto",marginTop:25},kind:"primary",value:"Start using EasyHooks!"},"Add Webhook")),0!==this.state.hookList&&n.a.createElement("h1",{style:{fontSize:50}},"Existing hooks"),n.a.createElement("table",{style:{width:"100%"}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Remove"),n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Type"),n.a.createElement("th",null,"URL"))),n.a.createElement("tbody",null,this.state.hookList.map((function(t,a){return n.a.createElement("tr",{key:a+"row"},n.a.createElement("td",{key:t},n.a.createElement(k.Button,{kind:"destructive",onClick:function(){return e.remove(t.attributes.id)}},"Remove")),n.a.createElement("td",{key:a+"name"},t.attributes.name),n.a.createElement("td",{key:a+"source"},e.makeItNice(t.getElementsByTagName("webhook-source")[0].children[0].name)),n.a.createElement("td",{key:a+"dest"},t.getElementsByTagName("webhook-destination-http")[0].attributes.url))}))))),n.a.createElement("div",null),n.a.createElement("h3",{style:{position:"absolute",bottom:0,left:20}},"EasyHooks is winner of the #data19 Hackathon and build by Merlijn Buit (",n.a.createElement("a",{href:"https://twitter.com/MerlijnBuit",rel:"noopener noreferrer",target:"_blank"},"@merlijnbuit"),") and Tristan Guillevin (",n.a.createElement("a",{href:"https://twitter.com/ladataviz",rel:"noopener noreferrer",target:"_blank"},"@ladataviz"),")"))}}]),t}(o.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.6f34dc1e.chunk.js.map